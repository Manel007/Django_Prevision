<nav id="menu" class="navbar navbar-default navbar-fixed-top">
  <div class="container"> 
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> 
        <span class="sr-only">Toggle navigation</span> 
        <span class="icon-bar"></span> 
        <span class="icon-bar"></span> 
        <span class="icon-bar"></span> 
      </button>
      <a class="navbar-brand page-scroll" href="#page-top">AgriPredict</a> 
    </div>
    
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="#about" class="page-scroll">About</a></li>
        <li><a href="#restaurant-menu" class="page-scroll">Menu</a></li>
        <li><a href="#portfolio" class="page-scroll">Pesticides</a></li>
        <li><a href="#team" class="page-scroll">Review</a></li>
        <li><a href="#call-reservation" class="page-scroll">Contact</a></li>
      </ul>
    </div>
    <!-- /.navbar-collapse --> 
  </div>
</nav>

<header id="header">
  <div class="intro">
    <div class="overlay">
      <div class="container">
        <div class="row">
          <div class="intro-text">
            <h1>AgriPredict</h1>
            <p>Yield / Culture / Pesticides</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

{% block stylesheets %}
<style>
  /* New CSS Styles */
  .yield-list-content {
    background-color: #f9f9f9; /* Light background color */
    padding: 20px;
    border-radius: 8px;
}

.yield-list-card {
    background-color: #ffffff; /* White card background */
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    margin-bottom: 20px;
}

.yield-list-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px;
    color: #ffffff;
    border-radius: 8px 8px 0 0;
}

.button-predict-yield {
    background-color: #247924; /* Secondary color */
    color: #000;
    padding: 8px 12px;
    border: none;
    border-radius: 4px;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.button-predict-yield:hover {
    background-color: #449d44; /* Darker on hover */
}

.search-container {
    margin: 15px;
}

.search-input {
    width: 100%;
    padding: 10px;
    border: 1px solid #449d44; /* Border color */
    border-radius: 4px;
}

.yield-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
}

.table-header {
    background-color: #f1f1f1; /* Header background */
}

.yield-table th, .yield-table td {
    padding: 12px;
    text-align: left;
    border-bottom: 1px solid #dddddd;
}

.yield-table tr:hover {
    background-color: #f2f2f2; /* Row hover effect */
}

.pagination-container {
    margin-top: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.pagination-button {
    background-color: #247924; /* Primary color */
    color: #ffffff;
    padding: 10px;
    border: none;
    border-radius: 4px;
    margin: 0 5px;
    text-decoration: none;
    transition: background-color 0.3s ease;
}

.pagination-button:hover {
    background-color: #449d44; /* Darker on hover */
}

.current-page {
    font-weight: bold;
}

</style>
{% endblock stylesheets %}

<!-- Favicons ================================================== -->
<link rel="shortcut icon" href="{{ FRONT_ROOT }}/img/favicon.ico" type="image/x-icon">
<link rel="apple-touch-icon" href="{{ FRONT_ROOT }}/img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="{{ FRONT_ROOT }}/img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="{{ FRONT_ROOT }}/img/apple-touch-icon-114x114.png">

<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="{{ FRONT_ROOT }}/css/bootstrap.css">
<link rel="stylesheet" type="text/css" href="{{ FRONT_ROOT }}/fonts/font-awesome/css/font-awesome.css">

<!-- Stylesheet ================================================== -->
<link rel="stylesheet" type="text/css" href="{{ FRONT_ROOT }}/css/style.css">
<link rel="stylesheet" type="text/css" href="{{ FRONT_ROOT }}/css/nivo-lightbox/nivo-lightbox.css">
<link rel="stylesheet" type="text/css" href="{{ FRONT_ROOT }}/css/nivo-lightbox/default.css">
<link href="https://fonts.googleapis.com/css?family=Raleway:300,400,500,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Dancing+Script:400,700" rel="stylesheet">

<script type="text/javascript" src="{{ FRONT_ROOT }}/js/jquery.1.11.1.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/bootstrap.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/SmoothScroll.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/nivo-lightbox.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/jquery.isotope.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/jqBootstrapValidation.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/contact_me.js"></script> 
<script type="text/javascript" src="{{ FRONT_ROOT }}/js/main.js"></script>
{% block content %}
<div class="yield-list-content">
    <div class="yield-list-row">
        <div class="yield-list-col">
            <div class="yield-list-card">
                <div class="yield-list-card-header">
<div>
                    <h4 class="menu-section-title">List of Yields</h4>
                    <hr></div>
                    <a href="{% url 'yield_prediction' %}" class="button-predict-yield">Predict Yield</a>
                </div>
                <div class="yield-list-card-body">
                    <div class="search-container">
                        <form method="GET" action="{% url 'yield_list' %}" onsubmit="return false;">
                            <input type="text" id="searchInput" name="search" class="search-input" placeholder="Search by name, quantity, or date..." value="{{ search_query }}" oninput="searchFunction()">
                        </form>
                    </div>
                    <div class="table-responsive">
                        <table class="yield-table" id="yieldTable">
                            <thead class="table-header">
                                <tr>
                                    <th>Name</th>
                                    <th>Quantity</th>
                                    <th>Harvest Date</th>
                                    <th class="text-center">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
                                {% for yield in page_obj %}
                                    <tr>
                                        <td>{{ yield.area }}</td>
                                        <td>{{ yield.item }}</td>
                                        <td>{{ yield.year }}</td>
                                        <td class="text-center">
                                            <a href="{% url 'create_review' yield.pk %}" class="button-add-review">
                                                <i class="fas fa-pencil-alt" style="color: green; margin-right: 5px;"></i> <!-- Green icon -->
                                                Create Review
                                            </a>
                                        </td>
                                    </tr>
                                {% empty %}
                                    <tr>
                                        <td colspan="4" class="text-center">No yields found.</td>
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>

                    <div class="summary-container">
                        <h4 class="title-large">Total Yields: {{ page_obj.paginator.count }}</h4>
                    </div>

                    <div class="pagination-container">
                        <div class="pagination">
                            <div class="pagination-links">
                                {% if page_obj.has_previous %}
                                    <a class="pagination-button" href="?page=1">First</a>
                                    <a class="pagination-button" href="?page={{ page_obj.previous_page_number }}">Previous</a>
                                {% endif %}

                                <span class="current-page">Page {{ page_obj.number }}</span>

                                {% if page_obj.has_next %}
                                    <a class="pagination-button" href="?page={{ page_obj.next_page_number }}">Next</a>
                                    <a class="pagination-button" href="?page={{ page_obj.paginator.num_pages }}">Last</a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function searchFunction() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toLowerCase();
        table = document.getElementById("yieldTable");
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none"; // Hide all rows initially
            td = tr[i].getElementsByTagName("td");
            for (var j = 0; j < td.length; j++) {
                if (td[j]) {
                    txtValue = td[j].textContent || td[j].innerText;
                    if (txtValue.toLowerCase().indexOf(filter) > -1) {
                        tr[i].style.display = ""; // Show row if it matches
                        break; // Stop checking after first match
                    }
                }
            }
        }
    }
</script>
{% endblock content %}

{% include 'front/footer.html' %}
